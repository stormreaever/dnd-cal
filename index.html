<!DOCTYPE html>
<html lang="en-US">
  <head>    
    <title>Derevon Moon Calendar</title>
    <link rel="icon" type="image/png" href="favicon.png" />    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">      
    <link rel="stylesheet" href="style.css">  
    <!-- Angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-sanitize.min.js
"></script>
    <script src="app.js"></script>
  </head>

  <body>
    <svg width=25 height=25 viewbox="0 0 100 100">
      <!-- draw bg moon -->
      <circle cx="50" cy="50" r="50" fill="#dddddd"/>
      <!-- draw curves -->
      <path d="
      M0 50 
      C 0 0, 50 0, 50 0 
      S 75 0, 75 50
      S 50 100, 50 100
      S 0 100, 0 50z
      " fill="#999999"/>
      
      <circle cx="50" cy="50" r="49" fill="transparent" stroke="#999999"/>
    </svg>
    
    <div ng-app="calApp" ng-controller="calCtrl">
      
      <div class="info-bar">
        <div class="season">{{ selected.month.season }}</div>
        <div class="moons">
          <span ng-repeat="moon in selected.day.moons">
            <ng-bind-html
              ng-bind-html="draw_moon(moon.phase, moon.size)">
            </ng-bind-html>
          </span>
        </div>
        <div class="date">
          <button ng-click="selectDayById(selected.id - 1)">&laquo;</button> 
          Year {{ cal.year }} {{ selected.month.name }} {{ selected.day.number }}, {{ selected.day.day_of_week }} 
          <button ng-click="selectDayById(selected.id + 1)">&raquo;</button></div>
      </div>
      
      <h1>It is the year {{ cal.year }}
      <button ng-click="setYear(cal.year - 1)">Go down</button>
      <button ng-click="setYear(cal.year + 1)">Go up</button>
      
      </h1>
      
      <table ng-repeat="month in cal.months">
        <caption>
          <h2>{{ month.name }}</h2>
          <p class="season">{{ month.season }}</p>
        </caption>
        <tr>
          <th ng-repeat="week_day in cal.week_days">
            {{ week_day }}
          </th>
        </tr>
        <tr ng-repeat="week in month.weeks">
          <td 
          ng-repeat="day in week" 
          ng-click="selectDay(day, month)" 
          ng-class="{'lunar-event': day.lunar_event, 'selected': day.day_of_year==selected.id}">
            
            <div class="day-number">{{ day.number }}</div>
            
            <span ng-repeat="moon in day.moons">
              <ng-bind-html
                ng-bind-html="draw_moon(moon.phase, moon.size)">
              </ng-bind-html>
            </span>
            
          </td>
        </tr>
      </ul>
    </table>
      
    </div>
    

  </body>
</html>